# è·¯ç”±ç»“æ„è®¾è®¡

ä½ å€¾å‘å°† â€œEditorâ€ è§†ä¸ºã€ŒWorkspaceã€æœ¬ä½“ï¼Œè¿™å¾ˆåˆç†ã€‚æˆ‘å»ºè®®æŒ‰ç…§ä»¥ä¸‹é€»è¾‘æ¥ç»„ç»‡è·¯ç”±ï¼š

### ğŸ§­ é¡¶å±‚è·¯ç”±ç»“æ„ï¼š

```
/
â”œâ”€â”€ workspace/                       â† ç¼–è¾‘å™¨å…¥å£ï¼ˆæ²‰æµ¸å¼ï¼‰
â”‚   â”œâ”€â”€ [workspaceId]/              â† æ¯ä¸ª Workspaceï¼ˆæ–‡æ¡£/é¡¹ç›®/çŸ¥è¯†å®‡å®™ï¼‰
â”‚   â”‚   â”œâ”€â”€ mode=writing            â† å†™ä½œæ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ mode=research           â† ç ”ç©¶æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ mode=canvas             â† Canvas/è®¡åˆ’æ¨¡å¼
â”‚   â”‚   â””â”€â”€ mode=graph              â† çŸ¥è¯†å›¾è°±ç¼–è¾‘å™¨
â”‚   â””â”€â”€ new?template=research       â† åˆ›å»ºæ–° Workspaceï¼ˆå¸¦æ¨¡æ¿ï¼‰
â”œâ”€â”€ explore/                        â† AI ç”Ÿæˆçµæ„Ÿæ± /å‘ç°åŒº
â”œâ”€â”€ search/                         â† å…¨å±€è¯­ä¹‰æœç´¢ + çŸ¥è¯†é—®ç­”
â”œâ”€â”€ tools/                          â† ä½ çš„å·¥å…·é›†ï¼ˆæ’ä»¶ã€å›¾è°±å·¥å…·ã€ç”»å¸ƒç”Ÿæˆå™¨ç­‰ï¼‰
â”‚   â””â”€â”€ [toolId]/
â”œâ”€â”€ templates/                      â† åœºæ™¯æ¨¡æ¿åº“ï¼ˆå†™ä½œã€ç ”ç©¶ã€å­¦ä¹ ï¼‰
â”‚   â””â”€â”€ [templateId]/
â”œâ”€â”€ plugins/                        â† æ’ä»¶å¸‚åœºï¼ˆæœªæ¥ç”Ÿæ€æ–¹å‘ï¼‰
â”‚   â””â”€â”€ [pluginId]/
â”œâ”€â”€ account/
â”œâ”€â”€ pricing/
â””â”€â”€ settings/
```

> æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½éƒ½å›´ç»• `workspace/[id]?mode=` å»¶å±•ï¼Œå®ç°ã€Œä¸€ä¸ªå…¥å£ï¼Œå¤šä¸ªç»´åº¦ã€ã€‚

---

### ğŸ” ç¤ºä¾‹ URLï¼š

* `workspace/4f21r?mode=writing` â†’ å†™ä½œæ¨¡å¼ï¼ˆå¯Œæ–‡æœ¬ï¼‰
* `workspace/4f21r?mode=graph` â†’ åŒä¸€ä¸ªæ–‡æ¡£çš„å›¾è°±è§†å›¾
* `workspace/new?template=ai-research` â†’ åˆ›å»ºå¸¦ç ”ç©¶æ¨¡æ¿çš„æ–° Workspace
* `tools/graph-inspector` â†’ å›¾è°±å…³ç³»æŸ¥çœ‹å™¨ï¼ˆç‹¬ç«‹å·¥å…·é¡µï¼‰
* `plugins/slides-generator` â†’ å¹»ç¯ç‰‡ç”Ÿæˆå™¨æ’ä»¶é¡µé¢

---

## 2ï¸ç”¨æˆ·è·¯å¾„ä¸ä¿¡æ¯æ¶æ„ï¼ˆIA + UX Flowï¼‰

> Clean ä½“éªŒ â‰  åŠŸèƒ½å°‘ï¼Œè€Œæ˜¯â€œåªåœ¨å¯¹çš„æ—¶é—´å±•ç¤ºå¯¹çš„åŠŸèƒ½â€

### ğŸ§  å…¨æµç¨‹ç”¨æˆ·è·¯å¾„è®¾è®¡ï¼š

```
é¦–æ¬¡ç”¨æˆ·
 â””â†’ /workspace/new  (ä»æ¨¡æ¿/ç©ºç™½åˆ›å»º)
     â””â†’ é€‰æ‹©æ¨¡æ¿ (Writing, Research, Planning)
         â””â†’ /workspace/abc123?mode=writing

è€ç”¨æˆ·
 â””â†’ / (æˆ– /workspace)
     â””â†’ æœ€è¿‘æ‰“å¼€çš„ Workspaceï¼ˆAuto Resumeï¼‰
         â””â†’ è¿›å…¥æ²‰æµ¸å¼ Editor

å†™ä½œæ—¶éœ€è¦èµ„æ–™
 â””â†’ æ‰“å¼€ Floating AI Agent
     â””â†’ æ’å…¥å·¥å…·ï¼šæ–‡çŒ®ã€æ‘˜è¦ã€å›¾è°±ç­‰

ç ”ç©¶ä¸­éœ€è¦åˆ‡æ¢ç»“æ„è§†å›¾
 â””â†’ åˆ‡æ¢ `mode=graph` æˆ– `mode=table`
```

### ğŸ“Œ Clean AI First åŸåˆ™çš„äº¤äº’ç­–ç•¥ï¼š

| åŠ¨ä½œ    | UI è¡Œä¸º                                | åŸåˆ™è¯´æ˜              |
| ----- | ------------------------------------ | ----------------- |
| åˆ›å»ºæ–‡æ¡£  | ä¸æ˜¾ç¤ºå†—ä½™æŒ‰é’®ï¼Œä»…ä¸€ä¸ªã€Œ+ æ–°å»ºã€æŒ‰é’®                  | åªå±•ç°æ ¸å¿ƒå…¥å£           |
| æ’ä»¶è°ƒç”¨  | æ‰€æœ‰æ’ä»¶é€šè¿‡ FloatingAgent æˆ– `/` å¿«æ·é”®èœå•è°ƒå‡º   | å‡å°‘æ˜¾å¼å·¥å…·æ            |
| æ¨¡å¼åˆ‡æ¢  | ä¸Šæ–¹ `mode` åˆ‡æ¢ Tabï¼Œæˆ–é€šè¿‡ Cmd+K / Palette | ä¸æ‰“æ–­å½“å‰åˆ›ä½œ           |
| æœç´¢çŸ¥è¯†  | å…¨å±€ Cmd+P / Search å¿«æ·è°ƒç”¨               | ä¸éœ€è¦ç¦»å¼€å½“å‰ Workspace |
| AI å¸®åŠ© | æ‚¬æµ®æŒ‰é’® / å¿«æ·é”®è§¦å‘ï¼ˆå¯¹è¯æ¡†é£æ ¼ï¼‰                  | æ²‰æµ¸å¼ï¼Œä¸å¼¹å‡ºæ–°é¡µ         |

---

## 3ï¸âƒ£ ç¼–è¾‘å™¨å†…éƒ¨ç»“æ„å»ºè®®ï¼ˆæ’ä»¶æœºåˆ¶ï¼‰

è¦ä¿è¯é•¿è¿œçš„ã€ŒåŠŸèƒ½å¯æ‰©å±• + ç¼–è¾‘å™¨å§‹ç»ˆä¿æŒå¹²å‡€ã€ï¼Œæ ¸å¿ƒæ˜¯ï¼š

### âœ… æ’ä»¶èƒ½åŠ›é›†ä¸­äºä¸¤ç§ä½ç½®ï¼š

1. `FloatingAgent` ä¸­é—´ä»¶å¼å¼¹å‡ºï¼ˆä¸»äº¤äº’è½½ä½“ï¼‰
2. `/` Slash Command èœå•ï¼ˆç»„ä»¶çº§æ’ä»¶ï¼‰
3. `Cmd+K`ï¼ˆå¿«é€Ÿæœç´¢ + æ’ä»¶å‘½ä»¤ï¼‰

---

### ğŸ§± æ’ä»¶æ³¨å…¥æœºåˆ¶ï¼ˆå»ºè®®æ¶æ„ï¼‰ï¼š

æ¯ä¸ªæ’ä»¶éƒ½å®šä¹‰ä¸ºï¼š

```ts
type EditorPlugin = {
  id: string
  name: string
  icon?: ReactNode
  renderUI?: () => ReactNode      // å¯æ’å…¥ UIï¼ˆå¦‚å›¾è°±å¯è§†åŒ–ï¼‰
  run?: (context: EditorContext) => void // å‘½ä»¤å¼æ‰§è¡Œï¼ˆç”Ÿæˆæ‘˜è¦ã€åˆ†æå›¾è°±ç­‰ï¼‰
  insertBlock?: (pos: number) => ASTNode
  slashCommand?: string           // ç”¨äº /
}
```

æ³¨å†Œæœºåˆ¶ï¼š

```ts
registerPlugin({
  id: 'graph-visualizer',
  name: 'å›¾è°±æŸ¥çœ‹å™¨',
  slashCommand: 'graph',
  renderUI: () => <GraphCanvas />,
})
```

---

## ğŸ§© å…³äº Toolã€Templateã€Plugin çš„åŒºåˆ«å’Œè·¯ç”±å»ºè®®ï¼š

| ç±»å‹       | æè¿°                     | ç¤ºä¾‹è·¯å¾„                     | UI è¡¨ç°æ–¹å¼            |
| -------- | ---------------------- | ------------------------ | ------------------ |
| Template | åˆå§‹åŒ–æ–‡æ¡£çš„åœºæ™¯é…ç½®             | `/templates/ai-writing`  | åˆ›å»ºæ—¶é€‰æ‹©              |
| Tool     | å¯¹å·²æœ‰ Workspace çš„åˆ†æ/æ“ä½œå·¥å…· | `/tools/graph-inspector` | Agent æ’ä»¶ / æ–°é¡µ      |
| Plugin   | ç¼–è¾‘å™¨å†…å¯æ’å…¥çš„åŠŸèƒ½æ¨¡å—           | `/plugins/slides-gen`    | `/` æ’å…¥ or Agent è°ƒç”¨ |

---

## âœ… æ€»ç»“ï¼šæ¨èè®¾è®¡ç­–ç•¥

1. **ä¸€åˆ‡æ ¸å¿ƒç¼–è¾‘è¡Œä¸ºèšç„¦äº `workspace/[id]?mode=`**
2. æ‰€æœ‰åŠŸèƒ½ä»¥ Plugin / Tool å½¢å¼æ³¨å…¥ï¼Œä½†å‘ˆç°æ–¹å¼ç»Ÿä¸€æ²‰æµ¸å¼äº¤äº’ï¼ˆAgentã€å¿«æ·èœå•ï¼‰
3. è·¯ç”±å±‚å°½é‡å°‘ â†’ `/workspace`, `/tools`, `/explore`ï¼ŒåŠŸèƒ½é€šè¿‡åŠ¨æ€äº¤äº’å±‚å‘¼å‡º
4. åç»­å¯æ‰©å±• `/api`, `/embed`, `/integration`, `/team/:id` ç­‰ä¼ä¸šéœ€æ±‚

---
